<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CurrenSync Blog</title>
  <meta name="description" content="CurrenSync VIP Blog â€“ Latest News, Fintech Trends, Celebrity Updates, and Hot Gist.">
  <link rel="stylesheet" href="styles.css">
  <style>
    body { font-family: Arial, sans-serif; background: #fff; margin: 0; padding: 0; }
    header { background: red; color: white; padding: 10px; text-align: center; font-size: 1.5rem; font-weight: bold; }
    #featured img { width: 100%; border-radius: 8px; margin-top: 8px; }
    #recentSlider { display: flex; overflow-x: auto; gap: 10px; margin: 10px 0; }
    .slide img { width: 200px; height: 100px; object-fit: cover; border-radius: 6px; }
    .post-card { background: #f9f9f9; margin: 10px 0; padding: 10px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .post-card img { width: 100%; border-radius: 10px; }
    .post-card h3 { margin: 10px 0 5px; }
    #pagination { margin: 20px 0; text-align: center; }
    #pagination button { margin: 0 3px; padding: 5px 10px; border: none; border-radius: 4px; }
    #pagination button.active { background: red; color: white; }
    #tagFilters button { margin: 2px; padding: 4px 8px; border: none; border-radius: 4px; background: #ddd; cursor: pointer; }
    #searchInput { width: 90%; padding: 8px; margin: 10px auto; display: block; border: 1px solid #ccc; border-radius: 5px; }
  </style>
</head>
<body>
  <header>Welcome to CurrenSync VIP</header>

  <main>
    <!-- Search -->
    <input type="text" id="searchInput" placeholder="Search posts...">

    <!-- Featured Post -->
    <section id="featured"></section>

    <!-- Recent Slider -->
    <div id="recentSlider"></div>

    <!-- Tag Filters -->
    <div id="tagFilters"></div>

    <!-- Blog Posts -->
    <div id="postList"></div>

    <!-- Pagination -->
    <div id="pagination"></div>
  </main>

  <script>
    const POSTS_PER_PAGE = 6;
    let currentPage = 1;
    let allPosts = [];
    let filteredPosts = [];

    async function fetchPosts() {
      const res = await fetch("blogdata.json");
      allPosts = await res.json();
      filteredPosts = [...allPosts];
      renderFeatured();
      renderRecentSlider();
      renderPosts();
      renderPagination();
      renderTags();
      setupSearch();
    }

    function renderFeatured() {
      const latest = filteredPosts[0];
      if (!latest) return;
      const html = `
        <h2><a href="${latest.slug}">${latest.title}</a></h2>
        <p><em>${new Date(latest.date).toDateString()}</em></p>
        <img src="${latest.thumbnail || 'https://via.placeholder.com/600x300'}" alt="${latest.title}">
      `;
      document.getElementById("featured").innerHTML = html;
    }

    function renderRecentSlider() {
      const slider = document.getElementById("recentSlider");
      slider.innerHTML = "";
      filteredPosts.slice(1, 6).forEach(p => {
        const slide = document.createElement("div");
        slide.className = "slide";
        slide.innerHTML = `
          <img src="${p.thumbnail || 'https://via.placeholder.com/200x100'}" alt="${p.title}">
          <h4><a href="${p.slug}">${p.title}</a></h4>
        `;
        slider.appendChild(slide);
      });
    }

    function renderPosts() {
      const list = document.getElementById("postList");
      list.innerHTML = "";
      const start = (currentPage - 1) * POSTS_PER_PAGE;
      const pagePosts = filteredPosts.slice(start, start + POSTS_PER_PAGE);
      pagePosts.forEach(p => {
        const item = document.createElement("div");
        item.className = "post-card";
        item.innerHTML = `
          <img src="${p.thumbnail || 'https://via.placeholder.com/300x200'}" alt="${p.title}">
          <h3><a href="${p.slug}">${p.title}</a></h3>
          <p>${p.summary}</p>
        `;
        list.appendChild(item);
      });
    }

    function renderPagination() {
      const totalPages = Math.ceil(filteredPosts.length / POSTS_PER_PAGE);
      const pagination = document.getElementById("pagination");
      pagination.innerHTML = "";
      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement("button");
        btn.textContent = i;
        btn.className = i === currentPage ? "active" : "";
        btn.addEventListener("click", () => {
          currentPage = i;
          renderPosts();
          renderPagination();
        });
        pagination.appendChild(btn);
      }
    }

    function renderTags() {
      const allTags = [...new Set(allPosts.flatMap(p => p.tags))];
      const tagContainer = document.getElementById("tagFilters");
      tagContainer.innerHTML = "";
      allTags.forEach(tag => {
        const btn = document.createElement("button");
        btn.textContent = tag;
        btn.addEventListener("click", () => {
          filteredPosts = allPosts.filter(p => p.tags.includes(tag));
          currentPage = 1;
          renderFeatured();
          renderRecentSlider();
          renderPosts();
          renderPagination();
        });
        tagContainer.appendChild(btn);
      });
    }

    function setupSearch() {
      const searchInput = document.getElementById("searchInput");
      searchInput.addEventListener("input", e => {
        const query = e.target.value.toLowerCase();
        filteredPosts = allPosts.filter(p => p.title.toLowerCase().includes(query));
        currentPage = 1;
        renderFeatured();
        renderRecentSlider();
        renderPosts();
        renderPagination();
      });
    }

    fetchPosts();
  </script>
</body>
</html>
