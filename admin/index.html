<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CurrenSync CMS Admin Panel - Debug</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        font-family: sans-serif;
        text-align: center;
        padding: 40px;
        color: #555;
      }
      .log {
        white-space: pre-wrap;
        text-align: left;
        max-width: 90%;
        margin: 20px auto;
        background: #f4f4f4;
        padding: 10px;
        border-radius: 5px;
        font-size: 14px;
        color: #333;
      }
    </style>
  </head>
  <body>
    <h1>üîß Debugging CurrenSync CMS...</h1>
    <div id="log" class="log">Initializing...</div>

    <script type="module">
      const log = msg => {
        document.getElementById("log").textContent += `\n${msg}`;
      };

      try {
        log("Importing StaticCMS module...");
        const { default: CMS } = await import("https://unpkg.com/@staticcms/app@3.0.1/dist/static-cms.js");

        if (!CMS) {
          log("‚ùå CMS module loaded but is undefined.");
        } else {
          log("‚úÖ StaticCMS module imported successfully.");

          try {
            log("Initializing CMS with config /admin/config.yml...");
            CMS.init({ config: "/admin/config.yml" });
            log("‚úÖ CMS.init() called.");
          } catch (initErr) {
            log("‚ùå Error during CMS.init(): " + initErr.message);
          }
        }
      } catch (err) {
        log("‚ùå Error loading CMS module: " + err.message);
      }

      window.onerror = function (msg, url, line, col, error) {
        log(`‚ùå JS Error: ${msg} at ${line}:${col}`);
      };
    </script>
  </body>
</html>
